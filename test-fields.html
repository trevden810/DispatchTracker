// Test FileMaker fields directly
const testFields = async () => {
  try {
    // Auth
    const authResponse = await fetch('https://modd.mainspringhost.com/fmi/data/vLatest/databases/PEP2_1/sessions', {
      method: 'POST',
      headers: {
        'Authorization': 'Basic ' + btoa('trevor_api:XcScS2yRoTtMo7'),
        'Content-Type': 'application/json'
      }
    });
    
    const authData = await authResponse.json();
    const token = authData.response.token;
    
    // Get jobs
    const jobsResponse = await fetch('https://modd.mainspringhost.com/fmi/data/vLatest/databases/PEP2_1/layouts/jobs_api/_find', {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${token}`,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        query: [{ "_kp_job_id": "*" }],
        limit: 3
      })
    });
    
    const jobsData = await jobsResponse.json();
    const job = jobsData.response.data[0];
    const fields = Object.keys(job.fieldData);
    
    console.log('ðŸ“Š FileMaker Job Fields Available:');
    console.log('Total Records:', jobsData.response.dataInfo.totalRecordCount.toLocaleString());
    console.log('Fields Count:', fields.length);
    
    // Show scheduling fields
    const scheduleFields = fields.filter(f => 
      f.toLowerCase().includes('date') || 
      f.toLowerCase().includes('time') || 
      f.toLowerCase().includes('arrive') || 
      f.toLowerCase().includes('complete')
    );
    
    console.log('\nðŸ“… Schedule-related fields:');
    scheduleFields.forEach(f => console.log(f));
    
    // Show status fields  
    const statusFields = fields.filter(f => 
      f.toLowerCase().includes('status') || 
      f.toLowerCase().includes('disposition')
    );
    
    console.log('\nðŸ“‹ Status fields:');
    statusFields.forEach(f => console.log(f));
    
    // Sample data
    console.log('\nðŸ“„ Sample job data:');
    console.log(`Job ${job.fieldData._kp_job_id}:`);
    [...scheduleFields, ...statusFields].forEach(field => {
      if (job.fieldData[field]) {
        console.log(`  ${field}: ${job.fieldData[field]}`);
      }
    });
    
  } catch (error) {
    console.error('Error:', error.message);
  }
};

testFields();